import { useState } from "react";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";

const questions = [
  {
    question: "1. यस संहिताको नाम के हो ?",
    options: ["मुलुकी देवानी संहिता, २०७४", "मुलुकी अपराध संहिता, २०७४", "मुलुकी ऐन, २०७४", "नेपाली अपराध कोड, २०७४"],
    answer: 1,
  },
  {
    question: "2. मुलुकी अपराध संहिता कहिलेबाट लागू भयो ?",
    options: ["२०७४ भदौ १", "२०७४ फागुन ३०", "२०७५ भदौ १", "२०७६ माघ १५"],
    answer: 2,
  },
  {
    question: "3. “कसूर” भन्नाले के जनाउँछ ?",
    options: ["कानूनमा निर्दिष्ट सजाय पाउने काम", "न्यायालयमा बुझाइएको मुद्दा", "आपराधिक संहिता", "प्रमाणित कार्य"],
    answer: 0,
  },
  {
    question: "4. “गम्भीर कसूर” को परिभाषा के हो ?",
    options: ["दश वर्षभन्दा बढी सजाय हुने", "तीन वर्षभन्दा बढी तर दश वर्षसम्म सजाय हुने", "पाँच वर्षसम्म सजाय हुने", "सधै कैद सजाय हुने"],
    answer: 1,
  },
  {
    question: "5. कसैले सत्यको भ्रममा परी गरेको कामलाई के मानिन्छ ?",
    options: ["अपराध", "गैरकानूनी", "कसूर", "कसूर होइन"],
    answer: 3,
  },
  {
    question: "6. बालबालिकाले गरेको कुनै काम कसूर मानिन्छ कि मानिंदैन?",
    options: ["मानिन्छ", "बालबालिकाको उमेर हेरी निर्णय हुन्छ", "मानिंदैन", "अदालतको आदेश पर्खनुपर्छ"],
    answer: 2,
  },
  {
    question: "7. एउटै कसूरमा दोहोरो सजाय हुन सक्छ ?",
    options: ["हुन्छ", "हुँदैन", "विशेष अवस्थामा हुन्छ", "अदालतको आदेशमा निर्भर गर्छ"],
    answer: 1,
  },
  {
    question: "8. जघन्य कसूर को परिभाषा कुन हो?",
    options: ["तीन वर्षभन्दा बढी सजाय", "जन्मकैद वा दश वर्षभन्दा बढी सजाय", "मृत्युदण्ड सजाय", "जरिवाना मात्र"],
    answer: 1,
  },
  {
    question: "9. नेपाल बाहिर कसैले नेपाली नागरिक विरुद्ध अपराध गरेमा…",
    options: ["सजाय दिन सकिँदैन", "सोही देशको कानून लागु हुन्छ", "नेपालमै सजाय लागु हुन्छ", "माफी दिन सकिन्छ"],
    answer: 2,
  },
  {
    question: "10. कसूर प्रमाणित नभएसम्म कसूरदार मान्न सकिन्छ ?",
    options: ["हुन्छ", "हुँदैन", "विशेष अवस्थामा हुन्छ", "अदालतले चाह्यो भने"],
    answer: 1,
  },
  {
    question: "11. कसैको भलाइका लागि मञ्जुरी लिएर गरिएको कामलाई…",
    options: ["अपराध मानिन्छ", "कसूर मानिन्छ", "कसूर मानिंदैन", "गैरकानूनी मानिन्छ"],
    answer: 2,
  },
  {
    question: "12. डर, रासमा परी गरिएको काम…",
    options: ["सधैं कसूर हो", "कहिल्यै कसूर होइन", "सन्देहको आधारमा मानिन्छ", "केही अवस्थामा कसूर मानिन्न"],
    answer: 3,
  },
  {
    question: "13. “मञ्जुरी” भन्नाले के जनाउँछ?",
    options: ["केवल मौखिक स्वीकृति", "लिखित स्वीकृति मात्र", "इशारा वा आचरणबाट दिइने स्वीकृति", "माथिका सबै"],
    answer: 3,
  },
  {
    question: "14. “अदालत” को परिभाषामा के पर्छ?",
    options: ["सर्वोच्च अदालत मात्र", "जिल्ला अदालत मात्र", "न्यायिक निकाय मात्र", "सर्वोच्च, उच्च र जिल्ला अदालत साथै कानूनी अधिकार प्राप्त अन्य निकाय"],
    answer: 3,
  },
  {
    question: "15. आपराधिक षड्यन्त्रको लागि कम्तिमा कति जना संलग्न हुनुपर्छ?",
    options: ["१", "२", "३", "५"],
    answer: 1,
  },
  {
    question: "16. दरुत्साहन गरेपछि अपराध भएमा…",
    options: ["सजाय हुँदैन", "आधा सजाय", "पूर्ण सजाय", "दुई गुणा सजाय"],
    answer: 2,
  },
  {
    question: "17. सजायका प्रकारहरूमा कुन समावेश छैन ?",
    options: ["कैद", "जरिवाना", "फांसी", "जन्मकैद"],
    answer: 2,
  },
  {
    question: "18. जन्मकैद सजायको गणना कति वर्ष बराबर मानिन्छ (सामान्य अवस्थामा)?",
    options: ["10 वर्ष", "15 वर्ष", "25 वर्ष", "जीवनभरि"],
    answer: 2,
  },
  {
    question: "19. बालबालिकालाई सजाय दिन मिल्दैन भनेको उमेर कति मुनिको लागि हो ?",
    options: ["10 वर्ष", "12 वर्ष", "14 वर्ष", "16 वर्ष"],
    answer: 0,
  },
  {
    question: "20. आपराधिक षड्यन्त्र पुरा नभएमा कति सजाय दिन सकिन्छ?",
    options: ["पुरा सजाय", "आधा सजाय", "सजाय हुँदैन", "दोब्बर सजाय"],
    answer: 1,
  },
  {
    question: "21. गम्भीर कसूरमा सजाय पाएको व्यक्तिले अर्को कसूर गरेमा…",
    options: ["सजाय माफ हुन्छ", "सजाय घटाइन्छ", "दोब्बर सजाय हुन्छ", "नयाँ सजाय हुँदैन"],
    answer: 2,
  },
  {
    question: "22. सजाय छुट पाउनको लागि कसूरदारले के गर्नु पर्छ?",
    options: ["अपराध स्वीकार", "आत्मसमर्पण", "अनुसन्धान सहयोग", "माथिका सबै"],
    answer: 3,
  },
  {
    question: "23. एकै घटनामा धेरै व्यक्तिमा कसूर गरेमा सजाय कस्तो हुन्छ?",
    options: ["सबै सदस्यलाई सजाय", "प्रमुखलाई मात्र", "समूहलाई जरिवाना", "केवल योजनाकारलाई"],
    answer: 0,
  },
  {
    question: "24. कसूर गम्भीर बनाउने अवस्था कुन हो?",
    options: ["अदालतमा खुलेर बोलेको", "डर लागेर बोलेको", "राष्ट्रसेवकको काममा बाधा पुगेको", "सामाजिक सेवा गरेको"],
    answer: 2,
  },
  {
    question: "25. कसूर गम्भीर घटाउने अवस्था कुन हो?",
    options: ["अपराध पछुतो नगर्ने", "अदालतमा झुट बोलेको", "बालबालिकाको उमेर १६ वर्ष भन्दा कम", "पुनः अपराध गर्ने"],
    answer: 2,
  },
];

export default function CriminalCodeQuiz() {
  const [selected, setSelected] = useState(Array(questions.length).fill(null));
  const [submitted, setSubmitted] = useState(false);

  const handleOptionClick = (qIndex, oIndex) => {
    if (!submitted) {
      const updated = [...selected];
      updated[qIndex] = oIndex;
      setSelected(updated);
    }
  };

  const handleSubmit = () => {
    setSubmitted(true);
  };

  const score = selected.reduce((acc, val, idx) => (val === questions[idx].answer ? acc + 1 : acc), 0);

  return (
    <div className="space-y-4 p-4 max-w-2xl mx-auto">
      {questions.map((q, i) => (
        <Card key={i} className="bg-white shadow-md">
          <CardContent className="p-4">
            <p className="font-semibold mb-2">{q.question}</p>
            <div className="space-y-2">
              {q.options.map((opt, j) => (
                <Button
                  key={j}
                  variant={selected[i] === j ? "default" : "outline"}
                  className={`w-full justify-start ${submitted && j === q.answer ? "bg-green-200" : ""} ${submitted && selected[i] === j && j !== q.answer ? "bg-red-200" : ""}`}
                  onClick={() => handleOptionClick(i, j)}
                >
                  {opt}
                </Button>
              ))}
            </div>
          </CardContent>
        </Card>
      ))}

      {!submitted ? (
        <Button className="w-full mt-4" onClick={handleSubmit}>Submit</Button>
      ) : (
        <div className="text-center mt-4 text-xl font-semibold">
          You scored {score} out of {questions.length}!
        </div>
      )}
    </div>
  );
}

